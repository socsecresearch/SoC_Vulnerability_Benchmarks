.file "main.S"
.section .text
.balign 4
.global main

main:
	addi	sp,sp,-16
	sw	ra,12(sp)
	rdcycle	a5
	jal	ra, goto_user_mode
	rdcycle	a5
	li	a5,0
	csrw	cycle,a5
	lw	ra,12(sp)
	li	a0,0
	addi	sp,sp,16
	ret

	
goto_user_mode:
	csrw	mepc,ra
	lui	ra,0x2
	addi	ra,ra,-2048
	csrc	mstatus,ra
	mret

.end
